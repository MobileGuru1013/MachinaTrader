{"version":3,"sources":["../src/global.js"],"names":["getParam","name","replace","regexS","regex","RegExp","results","exec","window","location","href","selectPickerImage","opt","id","text","optimage","$","element","data","opticon","$opt","jsInterval","signalrConnections","runJsInterval","script","str","delay","setInterval","clearJsInterval","key","Object","prototype","hasOwnProperty","call","clearInterval","addSignalrClient","connection","cleanSignalr","stop","beforeHook","vueMain","$children","$destroy","document","off","afterHook","processDate","node","postFormData","formId","submitUrl","reload","formDataField","form2js","ajax","type","url","cache","contentType","dataType","JSON","stringify","setTimeout","postFormDataSkipHidden","console","log"],"mappings":"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","sourcesContent":["// Wire up signalr and js intervals -> preparePage() is hooked from navigation script on page change\r\n/* eslint-disable */\r\n\r\nfunction getParam(name) {\r\n    name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\r\n    var regexS = \"[\\\\?&]\" + name + \"=([^&#]*)\";\r\n    var regex = new RegExp(regexS);\r\n    var results = regex.exec(window.location.href);\r\n    if (results === null)\r\n        return null;\r\n    else\r\n        return results[1];\r\n}\r\n\r\nfunction selectPickerImage(opt) {\r\n    if (!opt.id) {\r\n        return opt.text;\r\n    }\r\n    var optimage = $(opt.element).data('image');\r\n    var opticon = $(opt.element).data('icon');\r\n    if (!optimage && !opticon) {\r\n        return opt.text;\r\n    }\r\n    if (optimage) {\r\n        var $opt = $(\r\n            '<span class=\"userName\"><img style=\"width: 16px;\" src=\"' + optimage + '\" class=\"dropdownImage\" />&nbsp;&nbsp;' + $(opt.element).text() + '</span>'\r\n        );\r\n        return $opt;\r\n    }\r\n    if (opticon) {\r\n        var $opt = $(\r\n            '<span class=\"userName\"><i class=\"' + opticon + '\"/></i>&nbsp;&nbsp;' + $(opt.element).text() + '</span>'\r\n        );\r\n        return $opt;\r\n    }\r\n};\r\n\r\n\r\nconst jsInterval = {}\r\nconst signalrConnections = {}\r\n\r\nfunction runJsInterval(script, str, delay) {\r\n  if (!jsInterval[str]) {\r\n    // console.log(\"Not in array\")\r\n    jsInterval[str] = setInterval(script, delay)\r\n  }\r\n}\r\n\r\nfunction clearJsInterval() {\r\n  for (const key in jsInterval) {\r\n    if (Object.prototype.hasOwnProperty.call(jsInterval, key)) {\r\n      clearInterval(jsInterval[key])\r\n      jsInterval[key] = null\r\n      delete jsInterval[key]\r\n    }\r\n  }\r\n}\r\n\r\n/* eslint-disable no-unused-vars */\r\nfunction addSignalrClient(name, connection) {\r\n  if (!signalrConnections[name]) {\r\n    // console.log(\"Not in array\")\r\n    signalrConnections[name] = connection\r\n  }\r\n}\r\n\r\nfunction cleanSignalr() {\r\n  for (const key in signalrConnections) {\r\n    if (Object.prototype.hasOwnProperty.call(signalrConnections, key)) {\r\n      // console.log(\"Disconnect\")\r\n      // console.log(signalrConnections[key])\r\n      signalrConnections[key].stop()\r\n      delete signalrConnections[key]\r\n    }\r\n  }\r\n}\r\n\r\nfunction beforeHook() {\r\n\t// Hacky way to remove intervals\r\n\t/*for(i=0; i<100; i++)\r\n\t{\r\n\t\twindow.clearInterval(i);\r\n\t}*/\r\n    // Destroy all loaded vuejs components\r\n    for (var key in vueMain.$children) {\r\n        vueMain.$children[key].$destroy();\r\n    }\r\n\t//Cleanup all keydown listeners -> Needed for some JS components\r\n\t$(document).off(\"keydown\");\t\r\n\tclearJsInterval();\r\n\tcleanSignalr();\r\n}\r\n\r\nfunction afterHook() {\r\n\r\n}\r\n\r\n\r\nfunction processDate(node) {\r\n    return false;\r\n}\r\n\r\nfunction postFormData(formId, submitUrl, reload) {\r\n  if (typeof (reload) === 'undefined') reload = true;\r\n  var formDataField = form2js(formId, '.', true, processDate);\r\n  $.ajax({\r\n    type: \"POST\",\r\n    url: submitUrl,\r\n    cache: false,\r\n    contentType: \"application/json\",\r\n    dataType: 'json',\r\n    data: JSON.stringify(formDataField, null, null),\r\n  });\r\n  if (reload === true) {\r\n    setTimeout('location.reload();', 100);\r\n  }\r\n}\r\n\r\nfunction postFormDataSkipHidden(formId, submitUrl, reload) {\r\n  if (typeof (reload) === 'undefined') reload = true;\r\n  var formDataField = form2js(formId, '.', true, processDate, true);\r\n  console.log(formDataField);\r\n  $.ajax({\r\n    type: \"POST\",\r\n    url: submitUrl,\r\n    cache: false,\r\n    contentType: \"application/json\",\r\n    dataType: 'json',\r\n    data: JSON.stringify(formDataField, null, null),\r\n  });\r\n  if (reload === true) {\r\n    setTimeout('location.reload();', 100);\r\n  }\r\n}\r\n"],"file":"global.js"}